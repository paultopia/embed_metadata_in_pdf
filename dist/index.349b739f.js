var e=globalThis,t={},r={},n=e.parcelRequire11d9;function a(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),o=document.createElement("a");o.style.display="none",o.href=i,o.setAttribute("download",t),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o),window.URL.revokeObjectURL(i)},200)}}null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},e.parcelRequire11d9=n),(0,n.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,n=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)n.set(t[r],{baseUrl:e,path:t[r+1]})}}),n("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["1TzJS","index.349b739f.js","7YU74","pdf_worker.040d6cdf.js"]'));var i={},o={};o=function(e,t,r){if(t===self.location.origin)return e;var n=r?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))};let d=new URL("pdf_worker.040d6cdf.js",import.meta.url);function s(){var e;(e=Date.now(),new Promise(function t(r,n){c&&c.complete?r(c):Date.now()-e>=1e5?n(Error("timeout")):setTimeout(t.bind(this,r,n),30)})).then(function(){document.getElementById("progress").innerHTML="PDF File loaded from disc. Processing...";var e=new Uint8Array(c.pdf),t=c.pdfFileName,r=`modified-${t}`,n=new Worker(i);n.postMessage({mtype:"embed",bytes:e,citations:c.cites,citesFileName:c.citesFileName}),n.onmessage=function(e){switch(e.data.mtype){case"pdfout":a(e.data.bytes,r),document.getElementById("progress").innerHTML="Processing finished. Output PDF file downloaded. Reload page to do another file.",n.terminate();break;case"progress":document.getElementById("progress").innerHTML=e.data.message}}})}i=o(d.toString(),d.origin,!0);var c=function(){},l=function(){};document.getElementById("citation-selector").addEventListener("change",e=>{let t=e.target.files,r=t[0].name,n=new FileReader;n.addEventListener("load",e=>{var t=e.target.result;c.cites=t,c.citesFileName=r,c.pdf&&(c.complete=!0,s())}),n.readAsText(t[0],"UTF-8")}),document.getElementById("embed-selector").addEventListener("change",e=>{let t=e.target.files,r=t[0].name,n=new FileReader;n.addEventListener("load",e=>{let t=e.target.result;c.pdf=t,c.pdfFileName=r,c.cites&&(c.complete=!0,s())}),n.readAsArrayBuffer(t[0])}),document.getElementById("extract-selector").addEventListener("change",e=>{let t=e.target.files,r=new FileReader;r.addEventListener("load",e=>{var t;let r=e.target.result;l.pdf=r,l.complete=!0,(t=Date.now(),new Promise(function e(r,n){l&&l.complete?r(l):Date.now()-t>=1e5?n(Error("timeout")):setTimeout(e.bind(this,r,n),30)})).then(function(){document.getElementById("progress").innerHTML="PDF File loaded from disc. Processing...";var e=new Uint8Array(l.pdf),t=new Worker(i);t.postMessage({mtype:"extract",bytes:e}),t.onmessage=function(e){switch(e.data.mtype){case"dataExtracted":a(e.data.citations,e.data.fileName,"text/plain"),document.getElementById("progress").innerHTML="Processing finished. Citaton data file downloaded. Reload page to do another file.",t.terminate();break;case"progress":document.getElementById("progress").innerHTML=e.data.message}}})}),r.readAsArrayBuffer(t[0])});
//# sourceMappingURL=index.349b739f.js.map
